{"ast":null,"code":"import _objectSpread from\"D:/Task-1 Expense Tracker/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"D:/Task-1 Expense Tracker/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"D:/Task-1 Expense Tracker/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"D:/Task-1 Expense Tracker/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/Task-1 Expense Tracker/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useForm}from'react-hook-form';import{useDispatch}from'react-redux';import apiSlice from'../redux/apiSlice';// Import the apiSlice\nimport{addTransactionsToStore}from'../redux/reduxer';// Import the action to add transactions to the store\nimport List from'./List';import{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Form(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset;var dispatch=useDispatch();// Retrieve transactions from the Redux store\nvar transactionsFromStore=useSelector(function(state){return state.expensesReducer.transactions;});// Create a mutation for adding transactions\nvar _apiSlice$useAddTrans=apiSlice.useAddTransactionMutation(),_apiSlice$useAddTrans2=_slicedToArray(_apiSlice$useAddTrans,1),addTransaction=_apiSlice$useAddTrans2[0];var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(data){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(data){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return addTransaction(data).unwrap();case 4:response=_context.sent;// Reset the form\nreset();// Update the transactions in the Redux store with the new data\ndispatch(addTransactionsToStore([].concat(_toConsumableArray(transactionsFromStore),[response])));case 7:case\"end\":return _context.stop();}}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"form max-w-sm mx-auto w-96\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"font-bold pb-4 text-xl\",children:\"Transaction\"}),/*#__PURE__*/_jsx(\"form\",{id:\"form\",onSubmit:handleSubmit(onSubmit),children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid gap-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register('name')),{},{placeholder:\"Salary, House Rent, SIP\",className:\"form-input\"}))}),/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({className:\"form-input\"},register('type')),{},{children:[/*#__PURE__*/_jsx(\"option\",{value:\"Investment\",defaultValue:true,children:\"Investment\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Expense\",children:\"Expense\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Savings\",children:\"Savings\"})]})),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"text\"},register('amount')),{},{placeholder:\"Amount\",className:\"form-input\"}))}),/*#__PURE__*/_jsx(\"div\",{className:\"submit-btn\",children:/*#__PURE__*/_jsx(\"button\",{className:\"border py-2 text-white bg-indigo-500 w-full\",children:\"Make Transaction\"})})]})}),/*#__PURE__*/_jsx(List,{})]});}","map":{"version":3,"names":["React","useForm","useDispatch","apiSlice","addTransactionsToStore","List","useSelector","Form","register","handleSubmit","reset","dispatch","transactionsFromStore","state","expensesReducer","transactions","useAddTransactionMutation","addTransaction","onSubmit","data","unwrap","response"],"sources":["D:/Task-1 Expense Tracker/client/src/components/Form.js"],"sourcesContent":["import React from 'react';\nimport { useForm } from 'react-hook-form';\nimport { useDispatch } from 'react-redux';\nimport apiSlice from '../redux/apiSlice'; // Import the apiSlice\nimport { addTransactionsToStore } from '../redux/reduxer'; // Import the action to add transactions to the store\nimport List from './List';\nimport { useSelector } from 'react-redux';\n\nexport default function Form() {\n  const { register, handleSubmit, reset } = useForm();\n  const dispatch = useDispatch();\n\n  // Retrieve transactions from the Redux store\n  const transactionsFromStore = useSelector((state) => state.expensesReducer.transactions);\n\n  // Create a mutation for adding transactions\n  const [addTransaction] = apiSlice.useAddTransactionMutation();\n\n  const onSubmit = async (data) => {\n    if (!data) return;\n\n    // Add the new transaction\n    const response = await addTransaction(data).unwrap();\n\n    // Reset the form\n    reset();\n\n    // Update the transactions in the Redux store with the new data\n    dispatch(addTransactionsToStore([...transactionsFromStore, response]));\n  };\n\n  return (\n    <div className=\"form max-w-sm mx-auto w-96\">\n      <h1 className=\"font-bold pb-4 text-xl\">Transaction</h1>\n      <form id=\"form\" onSubmit={handleSubmit(onSubmit)}>\n        <div className=\"grid gap-4\">\n          <div className=\"input-group\">\n            <input type=\"text\" {...register('name')} placeholder='Salary, House Rent, SIP' className='form-input' />\n          </div>\n          <select className='form-input' {...register('type')}>\n            <option value=\"Investment\" defaultValue>Investment</option>\n            <option value=\"Expense\">Expense</option>\n            <option value=\"Savings\">Savings</option>\n          </select>\n          <div className=\"input-group\">\n            <input type=\"text\" {...register('amount')} placeholder='Amount' className='form-input' />\n          </div>\n          <div className=\"submit-btn\">\n            <button className='border py-2 text-white bg-indigo-500 w-full'>Make Transaction</button>\n          </div>\n        </div>\n      </form>\n      <List />\n    </div>\n  );\n}\n"],"mappings":"qmBAAA,MAAOA,MAAK,KAAM,OAAO,CACzB,OAASC,OAAO,KAAQ,iBAAiB,CACzC,OAASC,WAAW,KAAQ,aAAa,CACzC,MAAOC,SAAQ,KAAM,mBAAmB,CAAE;AAC1C,OAASC,sBAAsB,KAAQ,kBAAkB,CAAE;AAC3D,MAAOC,KAAI,KAAM,QAAQ,CACzB,OAASC,WAAW,KAAQ,aAAa,CAAC,wFAE1C,cAAe,SAASC,KAAI,EAAG,CAC7B,aAA0CN,OAAO,EAAE,CAA3CO,QAAQ,UAARA,QAAQ,CAAEC,YAAY,UAAZA,YAAY,CAAEC,KAAK,UAALA,KAAK,CACrC,GAAMC,SAAQ,CAAGT,WAAW,EAAE,CAE9B;AACA,GAAMU,sBAAqB,CAAGN,WAAW,CAAC,SAACO,KAAK,QAAKA,MAAK,CAACC,eAAe,CAACC,YAAY,GAAC,CAExF;AACA,0BAAyBZ,QAAQ,CAACa,yBAAyB,EAAE,gEAAtDC,cAAc,2BAErB,GAAMC,SAAQ,4FAAG,iBAAOC,IAAI,oIACrBA,IAAI,uFAGcF,eAAc,CAACE,IAAI,CAAC,CAACC,MAAM,EAAE,QAA9CC,QAAQ,eAEd;AACAX,KAAK,EAAE,CAEP;AACAC,QAAQ,CAACP,sBAAsB,8BAAKQ,qBAAqB,GAAES,QAAQ,GAAE,CAAC,CAAC,sDACxE,kBAXKH,SAAQ,4CAWb,CAED,mBACE,aAAK,SAAS,CAAC,4BAA4B,wBACzC,WAAI,SAAS,CAAC,wBAAwB,yBAAiB,cACvD,aAAM,EAAE,CAAC,MAAM,CAAC,QAAQ,CAAET,YAAY,CAACS,QAAQ,CAAE,uBAC/C,aAAK,SAAS,CAAC,YAAY,wBACzB,YAAK,SAAS,CAAC,aAAa,uBAC1B,0CAAO,IAAI,CAAC,MAAM,EAAKV,QAAQ,CAAC,MAAM,CAAC,MAAE,WAAW,CAAC,yBAAyB,CAAC,SAAS,CAAC,YAAY,GAAG,EACpG,cACN,4CAAQ,SAAS,CAAC,YAAY,EAAKA,QAAQ,CAAC,MAAM,CAAC,6BACjD,eAAQ,KAAK,CAAC,YAAY,CAAC,YAAY,6BAAoB,cAC3D,eAAQ,KAAK,CAAC,SAAS,qBAAiB,cACxC,eAAQ,KAAK,CAAC,SAAS,qBAAiB,IACjC,cACT,YAAK,SAAS,CAAC,aAAa,uBAC1B,0CAAO,IAAI,CAAC,MAAM,EAAKA,QAAQ,CAAC,QAAQ,CAAC,MAAE,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,YAAY,GAAG,EACrF,cACN,YAAK,SAAS,CAAC,YAAY,uBACzB,eAAQ,SAAS,CAAC,6CAA6C,8BAA0B,EACrF,GACF,EACD,cACP,KAAC,IAAI,IAAG,GACJ,CAEV"},"metadata":{},"sourceType":"module"}